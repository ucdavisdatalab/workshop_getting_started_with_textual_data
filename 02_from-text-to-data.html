
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. From Text to Data &#8212; Getting Started with Textual Data</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Cleaning and Counting" href="03_cleaning-and-counting.html" />
    <link rel="prev" title="1. Logistics" href="01_logistics.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/datalab-logo-full-color-rgb.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Getting Started with Textual Data</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Overview
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_logistics.html">
   1. Logistics
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   2. From Text to Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_cleaning-and-counting.html">
   3. Cleaning and Counting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_corpus-analytics.html">
   4. Corpus Analytics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_clustering-and-classification.html">
   5. Clustering and Classification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_topic-modeling.html">
   6. Topic Modeling
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/02_from-text-to-data.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ucdavisdatalab/workshop_getting_started_with_textual_data"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ucdavisdatalab/workshop_getting_started_with_textual_data/master?urlpath=tree/02_from-text-to-data.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-text">
   2.1. Loading Text
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plain-text">
     2.1.1. Plain text
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#character-sequences">
     2.1.2. Character sequences
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokenizing-strings">
     2.1.3. Tokenizing strings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#counting-words">
   2.2. Counting Words
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-first-pass">
     2.2.1. A first pass
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#top-words">
     2.2.2. Top words
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#investigating-duplicates">
     2.2.3. Investigating duplicates
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wait-what-s-a-word">
   2.3. Wait, What’s a Word?
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="from-text-to-data">
<h1><span class="section-number">2. </span>From Text to Data<a class="headerlink" href="#from-text-to-data" title="Permalink to this headline">¶</a></h1>
<p>This chapter, which we’ve asked you to read prior to the first workshop, is a general discussion of working with
textual data in Python. While the workshop series assumes you have at least a basic understanding of Python, we’ll
quickly review how to load, or “read in,” a single text file and format it for text analysis. We’ll do so both as a
refresher and because this simple action illuminates an important aspect of working with textual data: namely, that
to your computer, text is above all a <strong>sequence of characters</strong>. This is a key thing to keep in mind when
preparing your data for text mining and/or NLP.</p>
<p>As you work through this chapter, use it as a check on your Python skills. If you feel comfortable writing the code
below, you should be prepared for our sessions. The skills covered in this chapter include:</p>
<ul class="simple">
<li><p>Loading text data into Python</p></li>
<li><p>Working with different Python data structures (strings, lists, dictionaries)</p></li>
<li><p>Control flow with <code class="docutils literal notranslate"><span class="pre">for</span></code> loops</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">Pandas</span></code> dataframes</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Need to brush up on Python? The DataLab offers a Python Basics workshop series. You can find links to the series
reader and recording on our <a class="reference external" href="https://datalab.ucdavis.edu/workshops/">Workshop Archive page</a>.</p>
</div>
<div class="section" id="loading-text">
<h2><span class="section-number">2.1. </span>Loading Text<a class="headerlink" href="#loading-text" title="Permalink to this headline">¶</a></h2>
<p>To open a text file, we’ll use <code class="docutils literal notranslate"><span class="pre">with...open</span></code>. This saves us from forgetting to close the file stream and thereby
frees up a little memory for later computation. The memory strain a single text file puts on your computer isn’t
very large at all, but dozens, to say nothing of hundreds or thousands of texts, can start to slow things down, so
it’s good to get in the habit of automatically closing file streams right from the start.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data/session_one/shelley_frankenstein.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">frankenstein</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plain-text">
<h3><span class="section-number">2.1.1. </span>Plain text<a class="headerlink" href="#plain-text" title="Permalink to this headline">¶</a></h3>
<p>Here we use <code class="docutils literal notranslate"><span class="pre">r</span></code> in the <code class="docutils literal notranslate"><span class="pre">mode</span></code> argument because we’re working with <strong>plain text</strong> data (as opposed to <strong>binary</strong>
data, which would require <code class="docutils literal notranslate"><span class="pre">rb</span></code>). In computing, plain text has multiple fuzzy, interlocking meanings, but generally
it refers to some kind of data that is stored in a human-readable form, which is to say, it is comprised of a
collection of text characters (usually <a class="reference external" href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>, but increasingly <a class="reference external" href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>).</p>
<p>All the texts we’ll be working with are plain text files. But depending on your research area, access to plain text
representations of documents may be the exception, not the rule. If that’s the case, you would need to convert
your documents into a machine-readable form. Options for doing so range from automated methods, like <a class="reference external" href="https://en.wikipedia.org/wiki/Optical_character_recognition">optical
character recognition</a>, to good old fashioned hand transcription.</p>
<p>In plain text representations, every keystroke you would use to hand-transcribe a text has a corresponding sequence
of characters. That means this print output:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">frankenstein</span><span class="p">[:</span><span class="mi">364</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Letter 1

_To Mrs. Saville, England._


St. Petersburgh, Dec. 11th, 17—.


You will rejoice to hear that no disaster has accompanied the
commencement of an enterprise which you have regarded with such evil
forebodings. I arrived here yesterday, and my first task is to assure
my dear sister of my welfare and increasing confidence in the success
of my undertaking.
</pre></div>
</div>
</div>
</div>
<p>…is represented by the following in plain text:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frankenstein</span><span class="p">[:</span><span class="mi">364</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Letter 1\n\n_To Mrs. Saville, England._\n\n\nSt. Petersburgh, Dec. 11th, 17—.\n\n\nYou will rejoice to hear that no disaster has accompanied the\ncommencement of an enterprise which you have regarded with such evil\nforebodings. I arrived here yesterday, and my first task is to assure\nmy dear sister of my welfare and increasing confidence in the success\nof my undertaking.&#39;
</pre></div>
</div>
</div>
</div>
<div class="margin sidebar">
<p class="sidebar-title">You might ask…</p>
<p>Why aren’t spaces also represented by a character? Well, they are, but even in this relatively unformatted view
your computer continues to automatically render text in a human-readable way.</p>
</div>
<p>See all the <code class="docutils literal notranslate"><span class="pre">\n</span></code>, or <strong>newline</strong>, characters? Each one represents a linebreak. On the backend, your computer uses
newline characters to demarcate things like paragraphs, stanzas, titles, and so forth, but typically it suppreses
these characters when it renders text for our eyes. What we see in the two different outputs above, then, is a
difference between <strong>print conventions</strong> and <strong>code conventions</strong>: what appears as a blank in the former is in fact
an addressable unit in the latter.</p>
</div>
<div class="section" id="character-sequences">
<h3><span class="section-number">2.1.2. </span>Character sequences<a class="headerlink" href="#character-sequences" title="Permalink to this headline">¶</a></h3>
<p>The distinction between print and code conventions has some significant consequences for us, both practical and
conceptual. While, in the print view of the world, we tend to think of the word as the atomic unit of text, in the
code view of the world, text is – again – a <strong>sequence of characters</strong>. We can see this if we try to count how
many units are in our text:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The length of Frankenstein is:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">frankenstein</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The length of Frankenstein is: 418917
</pre></div>
</div>
</div>
</div>
<p>The Penguin edition of <em>Frankenstein</em> clocks in at ~220 pages. If we assume each page contains something like 350
words, that makes the book ~77,000 words long – far less than the number outputted above. Why, then, did Python
output this number? Because it counted characters, not words. To Python, our text is currently represented as a
giant blob. This blob makes no distinction between the start of one word and the next; its atomic unit is the
character, and so most of the operations we can run on it will thus address characters, not words.</p>
</div>
<div class="section" id="tokenizing-strings">
<h3><span class="section-number">2.1.3. </span>Tokenizing strings<a class="headerlink" href="#tokenizing-strings" title="Permalink to this headline">¶</a></h3>
<p>But we want to address our text at the level of words. To do so, we’ll need to manipulate how Python represents our
data, changing it from a long stream of characters to discrete (and preferably indexed) units. The process of doing
this is called <strong>tokenization</strong>. <em>To tokenize</em> means to break a continuous sequence of text data into substrings,
which we call “tokens.” Ultimately, tokens are what we will end up counting in text analytics. They are the atomic
unit of/for almost everything we’ll discuss in this series.</p>
<p>Notably, a token is more of a generic entity than it is a particular kind of text. Tokens don’t always mean words
(though you’ll often see them treated this way). In one sense, for example, our text is already tokenized – it’s
just tokenized by characters, which isn’t much use for us now. What we want to do, then, is tokenize our text in
such a way that we can address each word therein. This will help us keep track of those words, rather than mucking
around with blobby character data.</p>
<p>There are a number of different Python libraries that can tokenize text for you, but it’s easy enough to do one
version of this task with Python’s base functionality. For now, we’ll simply use <code class="docutils literal notranslate"><span class="pre">split()</span></code>. The default character
this function takes in its argument is any whitespace, which will nicely isolate words (whitespace characters
include <code class="docutils literal notranslate"><span class="pre">\n</span></code>, <code class="docutils literal notranslate"><span class="pre">\t</span></code>, and of course plain old spaces). We’ll call <code class="docutils literal notranslate"><span class="pre">split()</span></code> on our text and save the result to <code class="docutils literal notranslate"><span class="pre">doc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">doc</span> <span class="o">=</span> <span class="n">frankenstein</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Now, if we call <code class="docutils literal notranslate"><span class="pre">len()</span></code> on <code class="docutils literal notranslate"><span class="pre">doc</span></code>, we’ll see this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The length of Frankenstein is:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The length of Frankenstein is: 74975
</pre></div>
</div>
</div>
</div>
<p>Much better! Now that we have tokenized by words, this number is considerably closer to our estimations above.</p>
<div class="admonition-a-look-ahead admonition">
<p class="admonition-title">A look ahead</p>
<p>While you’ll most often tokenize on whitespaces, there are cases where you might want to chunk your text using
different characters, or even entire sequences of characters. For example, if you are studying poetry, you might
want to know some information about the average number of lines in a stanza. In that case, splitting on <code class="docutils literal notranslate"><span class="pre">\n</span></code> could
be more useful than space. We’ll cover this topic more fully in a later section; for the moment just keep in mind
that there are many different and valid ways to tokenize text.</p>
</div>
</div>
</div>
<div class="section" id="counting-words">
<h2><span class="section-number">2.2. </span>Counting Words<a class="headerlink" href="#counting-words" title="Permalink to this headline">¶</a></h2>
<p>With our text data loaded and properly formatted, we can start one of the core tasks of text analysis: counting words. While the next chapter will discuss this process in greater detail, we’ll preview it here to get a sense of
what’s to come and to review the basics of control flow in Python.</p>
<p>Splitting text transforms it into a list, where each word has its own separate index position. Remember that, in
Python, lists are ordered arrays that store multiple, potentially repeatable values. With this representation of
our data, it’s much easier get global word counts using something as simple as a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop: we can simply iterate
through every item in the list and tally them all up.</p>
<div class="section" id="a-first-pass">
<h3><span class="section-number">2.2.1. </span>A first pass<a class="headerlink" href="#a-first-pass" title="Permalink to this headline">¶</a></h3>
<p>Let’s do this now. We can build a little loop to find the cumulative number of times each word occurs in
<em>Frankenstein</em>. To store this information, we’ll use a dictionary. This will provide us with a way to access the
counts of individual words once we’ve looped through the entire novel.</p>
<div class="margin sidebar">
<p class="sidebar-title">What this loop does:</p>
<p>For every word in the novel, check whether that word is in the dictionary:</p>
<ul class="simple">
<li><p>If it isn’t in the dictionary, add that word and count <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>If it is, increase that word’s count by <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
</ul>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word_counts</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">word_counts</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>With this done, we can determine the total number of unique words in <em>Frankstein</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total number of unique words in Frankenstein:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word_counts</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total number of unique words in Frankenstein: 11590
</pre></div>
</div>
</div>
</div>
<p>And we can also access the counts of individual words. Let’s pick two: “imagination” and “monster.”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;imagination&quot;</span><span class="p">,</span> <span class="s2">&quot;monster&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">word</span><span class="si">:</span><span class="s2">&lt;12</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>imagination  14
monster      21
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For the sake of readability, this reader uses extra string formatting to control the print spacing of our output.
This isn’t necessary though, so feel free to work without it. If you do want to use the extra formatting, you can
do so by appending any print string with <code class="docutils literal notranslate"><span class="pre">f</span></code>. Then, use <code class="docutils literal notranslate"><span class="pre">{}</span></code> around variables that you’d like to interpolate into
the string. <code class="docutils literal notranslate"><span class="pre">:&lt;[NUMBER]</span></code> and <code class="docutils literal notranslate"><span class="pre">:&gt;[NUMBER]</span></code> will control left and right justification, respectively.</p>
</div>
<p>If you’re familiar with <em>Frankenstein</em>, you’ll know that it’s an epistolary novel, meaning it’s written as a series
of letters. It even begins this way: the heading in the first print output above reads “Letter 1.”</p>
<p>With that in mind, let’s tack on “letter” to our loop above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;imagination&quot;</span><span class="p">,</span> <span class="s2">&quot;monster&quot;</span><span class="p">,</span> <span class="s2">&quot;letter&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">word</span><span class="si">:</span><span class="s2">&lt;12</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">word_counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>imagination  14
monster      21
letter       17
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="top-words">
<h3><span class="section-number">2.2.2. </span>Top words<a class="headerlink" href="#top-words" title="Permalink to this headline">¶</a></h3>
<p>Great! This all seems to work well, though we won’t get very far if we continue to take a top-down approach and
spot check single words. How would we know what all is in the novel and what isn’t? Instead of approaching the data
in this way, it would be more useful to see what turns up if we just look at the count distribution as a whole.</p>
<p>To do so, let’s sort our dictionary by the number of times each word appears. Putting these counts in a <code class="docutils literal notranslate"><span class="pre">Pandas</span></code>
dataframe will make them much easier to work with.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">word_counts</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;COUNT&#39;</span><span class="p">],</span> <span class="n">orient</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s take a look at the 50 most frequent words:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>COUNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>the</th>
      <td>3897</td>
    </tr>
    <tr>
      <th>and</th>
      <td>2903</td>
    </tr>
    <tr>
      <th>I</th>
      <td>2719</td>
    </tr>
    <tr>
      <th>of</th>
      <td>2634</td>
    </tr>
    <tr>
      <th>to</th>
      <td>2072</td>
    </tr>
    <tr>
      <th>my</th>
      <td>1631</td>
    </tr>
    <tr>
      <th>a</th>
      <td>1338</td>
    </tr>
    <tr>
      <th>in</th>
      <td>1071</td>
    </tr>
    <tr>
      <th>was</th>
      <td>992</td>
    </tr>
    <tr>
      <th>that</th>
      <td>974</td>
    </tr>
    <tr>
      <th>had</th>
      <td>679</td>
    </tr>
    <tr>
      <th>with</th>
      <td>654</td>
    </tr>
    <tr>
      <th>which</th>
      <td>540</td>
    </tr>
    <tr>
      <th>but</th>
      <td>538</td>
    </tr>
    <tr>
      <th>me</th>
      <td>529</td>
    </tr>
    <tr>
      <th>his</th>
      <td>500</td>
    </tr>
    <tr>
      <th>not</th>
      <td>479</td>
    </tr>
    <tr>
      <th>as</th>
      <td>477</td>
    </tr>
    <tr>
      <th>for</th>
      <td>463</td>
    </tr>
    <tr>
      <th>he</th>
      <td>446</td>
    </tr>
    <tr>
      <th>by</th>
      <td>440</td>
    </tr>
    <tr>
      <th>on</th>
      <td>425</td>
    </tr>
    <tr>
      <th>you</th>
      <td>400</td>
    </tr>
    <tr>
      <th>from</th>
      <td>373</td>
    </tr>
    <tr>
      <th>it</th>
      <td>362</td>
    </tr>
    <tr>
      <th>have</th>
      <td>356</td>
    </tr>
    <tr>
      <th>be</th>
      <td>339</td>
    </tr>
    <tr>
      <th>her</th>
      <td>313</td>
    </tr>
    <tr>
      <th>were</th>
      <td>298</td>
    </tr>
    <tr>
      <th>this</th>
      <td>298</td>
    </tr>
    <tr>
      <th>is</th>
      <td>296</td>
    </tr>
    <tr>
      <th>at</th>
      <td>289</td>
    </tr>
    <tr>
      <th>when</th>
      <td>261</td>
    </tr>
    <tr>
      <th>The</th>
      <td>255</td>
    </tr>
    <tr>
      <th>your</th>
      <td>237</td>
    </tr>
    <tr>
      <th>an</th>
      <td>208</td>
    </tr>
    <tr>
      <th>so</th>
      <td>196</td>
    </tr>
    <tr>
      <th>could</th>
      <td>187</td>
    </tr>
    <tr>
      <th>will</th>
      <td>185</td>
    </tr>
    <tr>
      <th>been</th>
      <td>182</td>
    </tr>
    <tr>
      <th>would</th>
      <td>177</td>
    </tr>
    <tr>
      <th>one</th>
      <td>174</td>
    </tr>
    <tr>
      <th>their</th>
      <td>174</td>
    </tr>
    <tr>
      <th>all</th>
      <td>172</td>
    </tr>
    <tr>
      <th>she</th>
      <td>172</td>
    </tr>
    <tr>
      <th>or</th>
      <td>169</td>
    </tr>
    <tr>
      <th>they</th>
      <td>166</td>
    </tr>
    <tr>
      <th>are</th>
      <td>164</td>
    </tr>
    <tr>
      <th>if</th>
      <td>153</td>
    </tr>
    <tr>
      <th>should</th>
      <td>152</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>And there they are!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><em>Except look:</em> do you notice anything strange about these counts? Inspect them closely. The word “The” appears
about 20 words up from the end of the output – and yet it also appears as the <em>first</em> entry in this output. What’s
going on here?</p>
</div>
</div>
<div class="section" id="investigating-duplicates">
<h3><span class="section-number">2.2.3. </span>Investigating duplicates<a class="headerlink" href="#investigating-duplicates" title="Permalink to this headline">¶</a></h3>
<p>Let’s investigate. To see whether something might be off in the way we’ve generated our counts, we’ll look back at
our third example, “letter”.</p>
<p>Let’s grab the value for “letter” one more time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;letter&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>COUNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>letter</th>
      <td>17</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>That corresponds to what we have above. But remember: the start of <em>Frankenstein</em> doesn’t start with “letter.” It
starts with “Letter.” Might this make a difference, as with “the”/”The”? Let’s look.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="s2">&quot;Letter&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>COUNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Letter</th>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Not good… something seems to be off. There appear to be multiple copies of the same word in our dataframe.</p>
<p>To diagnose this problem, let’s dig in even further. We’ll search through all unique words in <em>Frankenstein</em> and
see whether we’re somehow missing any other copies of “letter.” We can do so by searching through the index of our
dataframe and testing whether “letter” is a substring of a given index position.</p>
<div class="admonition-reminder admonition">
<p class="admonition-title">Reminder</p>
<p>We haven’t yet removed numbers from our data, so be sure to convert your indices to strings to avoid mismaches in
datatypes.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;letter&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>COUNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>letter</th>
      <td>17</td>
    </tr>
    <tr>
      <th>letters</th>
      <td>12</td>
    </tr>
    <tr>
      <th>letter,</th>
      <td>4</td>
    </tr>
    <tr>
      <th>letters,</th>
      <td>3</td>
    </tr>
    <tr>
      <th>letter.</th>
      <td>2</td>
    </tr>
    <tr>
      <th>letter:</th>
      <td>1</td>
    </tr>
    <tr>
      <th>letters;</th>
      <td>1</td>
    </tr>
    <tr>
      <th>letters.</th>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>For good measure, let’s do this with “monster” as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;monster&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>COUNT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>monster</th>
      <td>21</td>
    </tr>
    <tr>
      <th>monster,</th>
      <td>5</td>
    </tr>
    <tr>
      <th>monster!</th>
      <td>2</td>
    </tr>
    <tr>
      <th>monster.’</th>
      <td>1</td>
    </tr>
    <tr>
      <th>‘monster!</th>
      <td>1</td>
    </tr>
    <tr>
      <th>monsters,</th>
      <td>1</td>
    </tr>
    <tr>
      <th>monster;</th>
      <td>1</td>
    </tr>
    <tr>
      <th>monsters</th>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="wait-what-s-a-word">
<h2><span class="section-number">2.3. </span>Wait, What’s a Word?<a class="headerlink" href="#wait-what-s-a-word" title="Permalink to this headline">¶</a></h2>
<p>The outputs above should make clear what is happening. <em>We have a problem in the way we’ve defined the concept of a
word.</em> Remember, to our computers, text is just a sequence of characters. Computers are highly literal in this
respect; they only ever read character-by-character. And while they don’t have an in-built concept of what words
are, we were able to coax them into treating character sequences as words by splitting those sequences on the basis
of spaces. That is, we said to our computers: “whenever you find a space, this marks the beginning or end of a
word.”</p>
<p>In doing so, we ended up creating a de facto definition of what constitutes a word: for this definition, a word is
any sequence of characters surrounded by spaces.</p>
<p>If we frame what we’ve done in this way, we can see that our computers followed our definition perfectly, doing
nothing more or less than splitting sequences of characters on spaces. In their character-by-character way of
reading, “letter” is different from “letter;” – and understandably so, for each is a different sequence of
characters surrounded by spaces. The same goes for “letter” and “Letter”: both are different character sequences
surrounded by spaces, for in a very rudimentary sense, lowercase <em>l</em> and uppercase <em>L</em> are simply not the same
character. (To be exact, the underlying Unicode “<a class="reference external" href="https://en.wikipedia.org/wiki/Universal_Character_Set_characters">codepoints</a>” for these letters are <code class="docutils literal notranslate"><span class="pre">U+006C</span></code> and <code class="docutils literal notranslate"><span class="pre">U+004C</span></code>,
respectively.)</p>
<div class="margin sidebar">
<p class="sidebar-title">To complicate things further…</p>
<p>Non-English languages and non-alphabetic writing systems add a productive challenge to all this. We can’t cover
this topic in full, but Quinn Drombowski has written about it in this <a class="reference external" href="http://quinndombrowski.com/?q=blog/2020/10/15/whats-word-multilingual-dh-and-english-default">helpful blogpost</a> on text analytics and the
“English default.”</p>
</div>
<p>In another sense, however, they <em>are</em> the same letter. We could say the same of “the” and “The.” The problem here
arises from the fact that, as opposed to our computers’ highly literal way of reading, we tend to consider the
meaning of words to be something that transcends differences in capitalization; that is mostly separable from
punctuation; and that sometimes even goes beyond spelling (think American v. British English) and inflection
(“run,” “running,” “ran” =&gt; “run”). In the above output, what we’d really like to see is something closer to what
linguists call <strong>lexemes</strong>, or the abstract units of meaning that underlie groups of words. Otherwise, we’re still
just counting characters.</p>
<p>The next chapter – and with it, our first workshop session – will discuss how to prepare textual data so as to
begin analyzing words.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "nlp"
        },
        kernelOptions: {
            kernelName: "nlp",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'nlp'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="01_logistics.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title"><span class="section-number">1. </span>Logistics</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="03_cleaning-and-counting.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title"><span class="section-number">3. </span>Cleaning and Counting</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Tyler Shoemaker and Carl Stahmer<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>